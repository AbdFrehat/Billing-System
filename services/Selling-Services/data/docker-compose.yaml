version: '3.9'

services:
  data-manager:
    build:
      context: ./data-manager
    image: data/data-manager
    ports:
      - "6080:6080"
    networks:
      - network
      - shared_network
    environment:
      EUREKA_CLIENT_SERVICE_URL_DEFAULT_ZONE: http://eureka-server:6010/selling/eureka/
    command: java -jar data-manager-1.0.0-SNAPSHOT.jar --spring.config.location=classpath:/application.yaml,classpath:/application-prod.yaml

  data-get-manager:
    build:
      context: ./get/data-get-manager
    image: data/get/data-get-manager
    networks:
      - network
      - shared_network
    depends_on:
      - data-manager
    environment:
      EUREKA_CLIENT_SERVICE_URL_DEFAULT_ZONE: http://eureka-server:6010/selling/eureka/
    command: java -jar data-get-manager-1.0.0-SNAPSHOT.jar --spring.config.location=classpath:/application.yaml,classpath:/application-prod.yaml

  data-sales-get-free:
    build:
      context: ./get/data-sales-get-free
    image: data/get/data-sales-get-free
    networks:
      - network
      - shared_network
    depends_on:
      - data-get-manager
    environment:
      EUREKA_CLIENT_SERVICE_URL_DEFAULT_ZONE: http://eureka-server:6010/selling/eureka/
      SPRING_DATA_MONGO_URI: mongodb://admin:123@selling-system-database:27017/
    command: java -jar data-sales-get-free-1.0.0-SNAPSHOT.jar --spring.config.location=classpath:/application.yaml,classpath:/application-prod.yaml

  data-sales-get:
    build:
      context: ./get/data-sales-get
    image: data/get/data-sales-get
    networks:
      - network
      - shared_network
    depends_on:
      - data-get-manager
    environment:
      EUREKA_CLIENT_SERVICE_URL_DEFAULT_ZONE: http://eureka-server:6010/selling/eureka/
      SPRING_DATA_MONGO_URI: mongodb://admin:123@selling-system-database:27017/
    command: java -jar data-sales-get-1.0.0-SNAPSHOT.jar --spring.config.location=classpath:/application.yaml,classpath:/application-prod.yaml

  data-sales-get-opt:
    build:
      context: ./get/data-sales-get-opt
    image: data/get/data-sales-get-opt
    networks:
      - network
      - shared_network
    depends_on:
      - data-get-manager
    environment:
      EUREKA_CLIENT_SERVICE_URL_DEFAULT_ZONE: http://eureka-server:6010/selling/eureka/
      SPRING_DATA_MONGO_URI: mongodb://admin:123@selling-system-database:27017/
    command: java -jar data-sales-get-opt-1.0.0-SNAPSHOT.jar --spring.config.location=classpath:/application.yaml,classpath:/application-prod.yaml

  data-save-manager:
    build:
      context: ./save/data-save-manager
    image: data/save/data-save-manager
    networks:
      - network
      - shared_network
    depends_on:
      - data-manager
    environment:
      EUREKA_CLIENT_SERVICE_URL_DEFAULT_ZONE: http://eureka-server:6010/selling/eureka/
    command: java -jar data-save-manager-1.0.0-SNAPSHOT.jar --spring.config.location=classpath:/application.yaml,classpath:/application-prod.yaml


  data-sale-save:
    build:
      context: ./save/data-sale-save
    image: data/save/data-sale-save
    networks:
      - network
      - shared_network
    depends_on:
      - data-save-manager
    environment:
      EUREKA_CLIENT_SERVICE_URL_DEFAULT_ZONE: http://eureka-server:6010/selling/eureka/
      SPRING_DATA_MONGO_URI: mongodb://admin:123@selling-system-database:27017/
    command: java -jar data-sale-save-1.0.0-SNAPSHOT.jar --spring.config.location=classpath:/application.yaml,classpath:/application-prod.yaml


  data-sales-save:
    build:
      context: ./save/data-sales-save
    image: data/save/data-sales-save
    networks:
      - network
      - shared_network
    depends_on:
      - data-save-manager
    environment:
      EUREKA_CLIENT_SERVICE_URL_DEFAULT_ZONE: http://eureka-server:6010/selling/eureka/
      SPRING_DATA_MONGO_URI: mongodb://admin:123@selling-system-database:27017/
    command: java -jar data-sales-save-1.0.0-SNAPSHOT.jar --spring.config.location=classpath:/application.yaml,classpath:/application-prod.yaml


  data-update-manager:
    build:
      context: ./update/data-update-manager
    image: data/update/data-update-manager
    networks:
      - network
      - shared_network
    depends_on:
      - data-manager
    environment:
      EUREKA_CLIENT_SERVICE_URL_DEFAULT_ZONE: http://eureka-server:6010/selling/eureka/
    command: java -jar data-update-manager-1.0.0-SNAPSHOT.jar --spring.config.location=classpath:/application.yaml,classpath:/application-prod.yaml


  data-sale-update:
    build:
      context: ./update/data-sale-update
    image: data/update/data-sale-update
    networks:
      - network
      - shared_network
    depends_on:
      - data-update-manager
    environment:
      EUREKA_CLIENT_SERVICE_URL_DEFAULT_ZONE: http://eureka-server:6010/selling/eureka/
      SPRING_DATA_MONGO_URI: mongodb://admin:123@selling-system-database:27017/
    command: java -jar data-sale-update-1.0.0-SNAPSHOT.jar --spring.config.location=classpath:/application.yaml,classpath:/application-prod.yaml


  data-sales-update:
    build:
      context: ./update/data-sales-update
    image: data/update/data-sales-update
    networks:
      - network
      - shared_network
    depends_on:
      - data-update-manager
    environment:
      EUREKA_CLIENT_SERVICE_URL_DEFAULT_ZONE: http://eureka-server:6010/selling/eureka/
      SPRING_DATA_MONGO_URI: mongodb://admin:123@selling-system-database:27017/
    command: java -jar data-sales-update-1.0.0-SNAPSHOT.jar --spring.config.location=classpath:/application.yaml,classpath:/application-prod.yaml


  data-delete-manager:
    build:
      context: ./delete/data-delete-manager
    image: data/delete/data-delete-manager
    networks:
      - network
      - shared_network
    depends_on:
      - data-manager
    environment:
      EUREKA_CLIENT_SERVICE_URL_DEFAULT_ZONE: http://eureka-server:6010/selling/eureka/
    command: java -jar data-delete-manager-1.0.0-SNAPSHOT.jar --spring.config.location=classpath:/application.yaml,classpath:/application-prod.yaml


  data-sale-delete:
      build:
        context: ./delete/data-sale-delete
      image: data/delete/data-sale-delete
      networks:
        - network
        - shared_network
      depends_on:
        - data-delete-manager
      environment:
        EUREKA_CLIENT_SERVICE_URL_DEFAULT_ZONE: http://eureka-server:6010/selling/eureka/
        SPRING_DATA_MONGO_URI: mongodb://admin:123@selling-system-database:27017/
      command: java -jar data-sale-delete-1.0.0-SNAPSHOT.jar --spring.config.location=classpath:/application.yaml,classpath:/application-prod.yaml


  data-sales-delete:
      build:
        context: ./delete/data-sales-delete
      image: data/delete/data-sales-delete
      networks:
        - network
        - shared_network
      depends_on:
        - data-delete-manager
      environment:
        EUREKA_CLIENT_SERVICE_URL_DEFAULT_ZONE: http://eureka-server:6010/selling/eureka/
        SPRING_DATA_MONGO_URI: mongodb://admin:123@selling-system-database:27017/
      command: java -jar data-sales-delete-1.0.0-SNAPSHOT.jar --spring.config.location=classpath:/application.yaml,classpath:/application-prod.yaml


  data-sale-delete-query:
    build:
      context: ./delete/data-sale-delete-query
    image: data/delete/data-sale-delete-query
    networks:
      - network
      - shared_network
    depends_on:
      - data-delete-manager
    environment:
      EUREKA_CLIENT_SERVICE_URL_DEFAULT_ZONE: http://eureka-server:6010/selling/eureka/
      SPRING_DATA_MONGO_URI: mongodb://admin:123@selling-system-database:27017/
    command: java -jar data-sale-delete-query-1.0.0-SNAPSHOT.jar --spring.config.location=classpath:/application.yaml,classpath:/application-prod.yaml


networks:
  network:
    name: selling-data-network
  shared_network:
    external: true

